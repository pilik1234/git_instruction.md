(self.webpackChunkasf_ui=self.webpackChunkasf_ui||[]).push([[4156],{7965:(t,e,s)=>{"use strict";var n=s(6426),o={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var s,a,r,i,c,u,l=!1;e||(e={}),s=e.debug||!1;try{if(r=n(),i=document.createRange(),c=document.getSelection(),(u=document.createElement("span")).textContent=t,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(n){if(n.stopPropagation(),e.format)if(n.preventDefault(),void 0===n.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[e.format]||o.default;window.clipboardData.setData(a,t)}else n.clipboardData.clearData(),n.clipboardData.setData(e.format,t);e.onCopy&&(n.preventDefault(),e.onCopy(n.clipboardData))})),document.body.appendChild(u),i.selectNodeContents(u),c.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(n){s&&console.error("unable to copy using execCommand: ",n),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),l=!0}catch(n){s&&console.error("unable to copy using clipboardData: ",n),s&&console.error("falling back to prompt"),a=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,t)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(i):c.removeAllRanges()),u&&document.body.removeChild(u),r()}return l}},2826:(t,e,s)=>{var n=s(1601),o=s(6314)(n);o.push([t.id,".bgr__check-title{margin-bottom:.5em}",""]),t.exports=o},3797:(t,e,s)=>{var n=s(1601),o=s(6314)(n);o.push([t.id,".bgr__no-keys{font-weight:bold;text-align:center}.bgr__table{min-width:100%;text-align:center}@media screen and (max-width: 335px){.bgr__table td{padding:.35em .5em}}",""]),t.exports=o},6655:(t,e,s)=>{var n=s(1601),o=s(6314)(n);o.push([t.id,".bgr__status{color:var(--color-text-disabled);margin:.5em 0 1em}",""]),t.exports=o},4165:(t,e,s)=>{var n=s(1601),o=s(6314)(n);o.push([t.id,".bgr__summary-title{margin-bottom:.5em}",""]),t.exports=o},3821:(t,e,s)=>{var n=s(1601),o=s(6314)(n);o.push([t.id,".bgr__info{align-items:center;display:flex;justify-content:center}.bgr__info-icon{padding-right:.5em}.hourglass-spin [class*=fa-hourglass]{animation:showHide 4s steps(1) infinite;opacity:0}.hourglass-spin .fa-hourglass-half{animation-delay:1s}.hourglass-spin .fa-hourglass-start{animation-delay:0s}.hourglass-spin .fa-hourglass-end{animation-delay:2s}.hourglass-spin .fa-hourglass-end.fa-spin{animation:showHideSpin 4s linear infinite}@keyframes showHide{0%{opacity:1}25%{opacity:0}}@keyframes showHideSpin{0%{opacity:0}74.99%{opacity:0}75%{opacity:1;transform:rotate(0deg)}100%{opacity:1;transform:rotate(180deg)}}",""]),t.exports=o},6426:t=>{t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,s=[],n=0;n<t.rangeCount;n++)s.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||s.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},4156:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>$});var n=function(){var t=this,e=t._self._c;return t.bot?e("main",{staticClass:"main-container"},[e("h2",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.bot.name,expression:"bot.name"}],staticClass:"title"},[t._v(t._s(t.bot.viewableName))]),t._v(" "),t.loading?e("h3",{staticClass:"subtitle"},[e("FontAwesomeIcon",{attrs:{icon:"spinner",size:"lg",spin:""}})],1):t._e(),t._v(" "),t.loading||"input"!==t.state?t._e():e("BgrStatus",{attrs:{usedKeys:t.usedKeys,unusedKeys:t.unusedKeys},on:{reset:t.showReset,"show-unused":function(e){t.state="unusedKeys"},"show-used":function(e){t.state="usedKeys"}}}),t._v(" "),t.loading||"input"!==t.state||0===t.bot.bgrCount?t._e():e("div",{staticClass:"bgr__info"},[t.bot.isConnected?e("div",{staticClass:"bgr__info-icon"},[e("FontAwesomeLayers",{staticClass:"hourglass-spin"},[e("FontAwesomeIcon",{attrs:{icon:"hourglass-start"}}),t._v(" "),e("FontAwesomeIcon",{attrs:{icon:"hourglass-half"}}),t._v(" "),e("FontAwesomeIcon",{attrs:{icon:"hourglass-end"}}),t._v(" "),e("FontAwesomeIcon",{attrs:{icon:"hourglass-end",spin:""}})],1)],1):t._e(),t._v(" "),e("p",{staticClass:"subtitle"},[t._v(t._s(t.backgroundQueueText))])]),t._v(" "),e("keep-alive",["input"===t.state?e("BgrInput",{on:{check:t.onCheck}}):t._e(),t._v(" "),"check"===t.state?e("BgrCheck",{attrs:{keys:t.keys,title:t.$t("bgr-check",{n:t.foundKeysCount}),bot:t.bot,confirming:t.confirming},on:{confirm:t.onConfirm,cancel:t.onCancel}}):t._e(),t._v(" "),"reset"===t.state?e("BgrReset",{attrs:{title:t.$t("bgr-reset"),resetting:t.resetting},on:{reset:t.onReset,cancel:t.onCancel}}):t._e(),t._v(" "),"summary"===t.state?e("BgrSummary",{attrs:{keys:t.summaryKeys,title:t.$t("bgr-summary-success",{n:t.addedKeysCount})},on:{back:function(e){return t.$parent.back()}}}):t._e(),t._v(" "),"usedKeys"===t.state?e("BgrSummary",{attrs:{keys:t.usedKeys,title:t.$t("bgr-used-keys")},on:{back:function(e){t.state="input"}}}):t._e(),t._v(" "),"unusedKeys"===t.state?e("BgrSummary",{attrs:{keys:t.unusedKeys,title:t.$t("bgr-unused-keys")},on:{back:function(e){t.state="input"}}}):t._e()],1)],1):t._e()};n._withStripped=!0;var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgr__check"},[t.noKeys?t._e():e("h3",{staticClass:"subtitle bgr__check-title"},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),e("div",{staticClass:"form-item"},[e("BgrKeys",{attrs:{keys:t.keys}})],1),t._v(" "),e("div",{staticClass:"form-item"},[e("div",{staticClass:"form-item__buttons form-item__buttons--center"},[t.noKeys?t._e():e("button",{staticClass:"button button--confirm",on:{click:function(e){return t.$emit("confirm")}}},[t.confirming?e("FontAwesomeIcon",{attrs:{icon:"spinner",spin:""}}):e("span",[t._v(t._s(t.$t("confirm")))])],1),t._v(" "),e("button",{key:"cancel",staticClass:"button button--cancel",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n        "+t._s(t.$t("cancel"))+"\n      ")])])])])};o._withStripped=!0;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgr__keys"},[t.noKeys?e("span",{staticClass:"bgr__no-keys"},[t._v(t._s(t.$t("bgr-no-keys-detected")))]):e("table",{staticClass:"bgr__table"},[t._m(0),t._v(" "),t._l(t.keys,(function(s,n){return e("tr",{key:n,staticClass:"key"},[e("td",[t._v(t._s(s))]),t._v(" "),e("td",[t._v(t._s(n))])])}))],2)])};a._withStripped=!0;const r={name:"BgrKeys",props:{keys:Object},computed:{noKeys(){return 0===Object.keys(this.keys).length}}};s(6944);var i=s(4486);const c=(0,i.A)(r,a,[function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v("Game")]),t._v(" "),e("th",[t._v("Key")])])}],!1,null,null,null).exports,u={name:"BgrCheck",components:{BgrKeys:c},props:{keys:Object,confirming:Boolean,title:String},computed:{noKeys(){return!Object.keys(this.keys).length}}};s(9541);const l=(0,i.A)(u,o,[],!1,null,null,null).exports;var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgr__input"},[e("div",{staticClass:"form-item"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.userInput,expression:"userInput"}],ref:"user-input",staticClass:"form-item__textarea",attrs:{cols:"70",rows:"15",placeholder:t.$t("bgr-keys-insert")+"\n\n"+t.$t("bgr-keys-insert-example"),spellcheck:"false"},domProps:{value:t.userInput},on:{input:function(e){e.target.composing||(t.userInput=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-item"},[e("div",{staticClass:"form-item__buttons form-item__buttons--center"},[e("button",{staticClass:"button button--confirm",on:{click:function(e){return t.$emit("check",t.keys,t.userInput)}}},[t._v("\n        "+t._s(t.$t("check"))+"\n      ")])])])])};m._withStripped=!0;const d=/[0-9A-Z]{4,7}-[0-9A-Z]{4,7}-[0-9A-Z]{4,7}(?:(?:-[0-9A-Z]{4,7})?(?:-[0-9A-Z]{4,7}))?/,y=[":",";","|","-",","],p={name:"BgrInput",data:()=>({userInput:"",userDelimiter:""}),computed:{keys(){const t=this.userInput.trim().split(/\r?\n/).map((t=>t.trim())).filter((t=>!!t));return this.parseKeys(t)}},mounted(){this.$refs["user-input"].focus()},methods:{detectKeyNamePair(t){if(!d.test(t))return{key:null,name:t};const e=d.exec(t)[0],s=t.indexOf(e),n=t.replace(e,"").trim();if(this.userDelimiter){const t=0===s?n.indexOf(this.userDelimiter):n.lastIndexOf(this.userDelimiter);return{key:e,name:n.slice(t,this.userDelimiter.length).trim()}}const o=n.charAt(0===s?0:n.length-1);return y.includes(o)?{key:e,name:n.slice(0===s?1:0,n.length-(0===s?0:1)).trim()}:{key:e,name:n}},parseKeys(t){const e={};for(let s=0;s<t.length;++s){const n=t[s],o=this.detectKeyNamePair(n);if(o.key&&o.name){e[o.key]=o.name;continue}const a=t[s+1],r=this.detectKeyNamePair(a);!r.name||r.key||o.name?r.name||!r.key||o.key?o.key&&(e[o.key]=o.key):e[r.key]=o.name:e[o.key]=r.name}return e}}},_=(0,i.A)(p,m,[],!1,null,null,null).exports;var g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgr__reset"},[e("h3",{staticClass:"subtitle"},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),e("div",{staticClass:"form-item"},[e("div",{staticClass:"form-item__buttons form-item__buttons--center"},[e("button",{staticClass:"button button--cancel",on:{click:function(e){return t.$emit("reset")}}},[t.resetting?e("FontAwesomeIcon",{attrs:{icon:"spinner",spin:""}}):e("span",[t._v(t._s(t.$t("reset")))])],1),t._v(" "),e("button",{key:"cancel",staticClass:"button button--confirm",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n        "+t._s(t.$t("cancel"))+"\n      ")])])])])};g._withStripped=!0;const h={name:"BgrReset",props:{resetting:Boolean,title:String}},f=(0,i.A)(h,g,[],!1,null,null,null).exports;var b=function(){var t=this,e=t._self._c;return t.usedKeysCount||t.unusedKeysCount?e("div",{staticClass:"bgr__status form-item"},[e("div",{staticClass:"form-item__buttons form-item__buttons--center"},[e("button",{staticClass:"button",on:{click:function(e){return t.$emit("show-used")}}},[t._v("\n      "+t._s(t.$t("bgr-used-keys-count",{n:t.usedKeysCount}))+"\n    ")]),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return t.$emit("show-unused")}}},[t._v("\n      "+t._s(t.$t("bgr-unused-keys-count",{n:t.unusedKeysCount}))+"\n    ")]),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return t.$emit("reset")}}},[t._v("\n      "+t._s(t.$t("reset"))+"\n    ")])])]):t._e()};b._withStripped=!0;const v={name:"BgrStatus",props:{usedKeys:Object,unusedKeys:Object},computed:{unusedKeysCount(){return Object.keys(this.unusedKeys).length},usedKeysCount(){return Object.keys(this.usedKeys).length}}};s(7594);const k=(0,i.A)(v,b,[],!1,null,null,null).exports;var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgr__summary"},[e("h3",{staticClass:"subtitle bgr__summary-title"},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),e("div",{staticClass:"form-item"},[e("BgrKeys",{attrs:{keys:t.keys}})],1),t._v(" "),e("div",{staticClass:"form-item"},[e("div",{staticClass:"form-item__buttons form-item__buttons--center"},[t.noKeys?t._e():e("button",{staticClass:"button button--confirm",on:{click:t.copyKeys}},[t._v("\n        "+t._s(t.$t("keys-copy"))+"\n      ")]),t._v(" "),e("button",{key:"back",staticClass:"button button--confirm",on:{click:function(e){return t.$emit("back")}}},[t._v("\n        "+t._s(t.$t("back"))+"\n      ")])])])])};C._withStripped=!0;var w=s(7965);const K={name:"BgrSummary",components:{BgrKeys:c},props:{keys:Object,title:String},computed:{noKeys(){return 0===Object.keys(this.keys).length}},methods:{copyKeys(){let t="";for(const[e,s]of Object.entries(this.keys))t+=`${s}\t${e}\n`;w(t),this.$info(this.$t("keys-copied"))}}};s(2906);const x={name:"BotBgr",components:{BgrCheck:l,BgrInput:_,BgrReset:f,BgrStatus:k,BgrSummary:(0,i.A)(K,C,[],!1,null,null,null).exports},data:()=>({loading:!0,confirming:!1,resetting:!1,state:"input",unusedKeys:{},usedKeys:{},keys:{},summaryKeys:{}}),computed:{bot(){return this.$store.getters["bots/bot"](this.$route.params.bot)},foundKeysCount(){return Object.keys(this.keys).length},addedKeysCount(){return Object.keys(this.summaryKeys).length},backgroundQueueText(){const t=this.$t("bgr-background-queue",{n:this.bot.bgrCount});return this.bot.isConnected?`${t}..`:t}},watch:{$route:{immediate:!0,async handler(){if(!this.bot)return;this.loading=!0;const{UnusedKeys:t,UsedKeys:e}=await this.loadBGR();this.unusedKeys=t,this.usedKeys=e,this.loading=!1}}},created(){this.bot||this.$router.replace({name:"bots"})},methods:{async loadBGR(){return(await this.$http.get(`bot/${this.bot.name}/gamesToRedeemInBackground`))[this.bot.name]},onCheck(t){this.keys=t,this.state="check"},async onConfirm(){this.confirming=!0;try{const t=await this.$http.post(`bot/${this.bot.name}/gamesToRedeemInBackground`,{gamesToRedeemInBackground:this.keys});this.state="summary",this.summaryKeys=t[this.bot.name]}finally{this.confirming=!1}},onCancel(){this.state="input"},showReset(){this.state="reset"},async onReset(){this.resetting=!0;try{await this.$http.del(`bot/${this.bot.name}/gamesToRedeemInBackground`),this.unusedKeys={},this.usedKeys={}}finally{this.resetting=!1,this.state="input"}}}};s(2004);const $=(0,i.A)(x,n,[],!1,null,null,null).exports},9541:(t,e,s)=>{var n=s(2826);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(534).A)("2b58d055",n,!1,{})},6944:(t,e,s)=>{var n=s(3797);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(534).A)("54e935c2",n,!1,{})},7594:(t,e,s)=>{var n=s(6655);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(534).A)("402d7b84",n,!1,{})},2906:(t,e,s)=>{var n=s(4165);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(534).A)("1697d198",n,!1,{})},2004:(t,e,s)=>{var n=s(3821);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,s(534).A)("80dc7b1c",n,!1,{})}}]);