(self.webpackChunkasf_ui=self.webpackChunkasf_ui||[]).push([[1447],{5670:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(5471),n=t(6123),r=t.n(n);function i(){const e=r().getSupportedLanguages(),{locale:s,noRegionalLocale:t}=a.Ay.i18n;switch(s){case"zh-CN":return"zh_CN";case"zh-TW":case"zh-HK":return"zh_TW";default:return e.includes(t)?t:"en"}}},716:(e,s,t)=>{var a=t(1601),n=t(6314)(a);n.push([e.id,".releases{word-break:break-word}.release{border-bottom:1px solid var(--color-background);margin-bottom:1em;padding-bottom:1em}.release:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.release__title{align-items:center;display:flex;margin-top:0}@media screen and (max-width: 400px){.release__title{align-items:flex-start;flex-direction:column;gap:4px}}.release__version{font-size:1.3em;font-weight:bold}.release__time{margin-left:auto}@media screen and (max-width: 400px){.release__time{margin-left:0}}.release__badge{background-color:var(--color-background-light);border:2px solid currentColor;border-radius:4px;display:inline-block;line-height:1;margin-left:.5em;padding:.25em .5em;text-align:center;vertical-align:baseline}@media screen and (max-width: 400px){.release__badge{margin-left:0}}.release__badge--prerelease{color:#a92616}.release__badge--stable{color:#00a65a}.release__badge--install{color:var(--color-text-info);cursor:pointer}.release__changelog-link{color:var(--color-theme);font-weight:600;text-decoration:none}.release__changes{font-family:monospace,monospace}.release__changes a{color:var(--color-theme);text-decoration:none}@media screen and (max-width: 450px){.release__changes ul{margin-inline-end:.2em;margin-inline-start:.2em;padding-inline-start:1.2em}}.release__changes details{margin-bottom:1em}.release__changes summary{cursor:pointer}",""]),e.exports=n},1447:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=function(){var e=this._self._c;return e("main",{staticClass:"main-container main-container--fullheight"},[e("div",{staticClass:"container"},[e("AsfReleases")],1)])};a._withStripped=!0;var n=function(){var e=this,s=e._self._c;return s("div",{staticClass:"releases"},[e.loading&&!e.statusText?s("h3",{staticClass:"subtitle"},[s("FontAwesomeIcon",{attrs:{icon:"spinner",size:"lg",spin:""}})],1):e._e(),e._v(" "),e.statusText?s("h3",{staticClass:"subtitle"},[e._v("\n    "+e._s(e.statusText)+"\n  ")]):e._l(e.releases,(function(t,a){return s("div",{key:a,staticClass:"release"},[s("div",{staticClass:"release__title"},[s("span",{staticClass:"release__version"},[e._v("v"+e._s(t.version))]),e._v(" "),s("span",{staticClass:"release__badge",class:[t.stable?"release__badge--stable":"release__badge--prerelease"]},[e._v(e._s(t.stable?e.$t("stable"):e.$t("pre-release")))]),e._v(" "),e.updatesEnabled&&e.canUpdate&&e.isLatestForUpdateChannel(a)&&e.isNewer(t.version)?s("span",{staticClass:"release__badge release__badge--install",on:{click:e.update}},[e._v(e._s(e.$t("releases-install")))]):e._e(),e._v(" "),s("span",{staticClass:"release__time"},[e._v(e._s(e.getTimeText(t.publishedAt)))])]),e._v(" "),s("div",{staticClass:"release__changes",domProps:{innerHTML:e._s(t.changelog)}}),e._v(" "),s("a",{staticClass:"release__changelog-link",attrs:{target:"_blank",rel:"noreferrer noopener",href:`https://github.com/JustArchiNET/ArchiSteamFarm/releases/tag/${t.version}`}},[e._v(e._s(e.$t("changelog-full")))])])}))],2)};n._withStripped=!0;var r=t(5353),i=t(6123),l=t.n(i),o=t(6736),c=t(6960),h=t.n(c),d=t(5670),g=t(2822),u=t(1973);const p={name:"AsfReleases",data:()=>({loading:!0,error:null,releases:[],releaseCount:5,updating:!1,emojiSettings:{parseToHtml:!1,parseToUnicode:!0}}),computed:{...(0,r.L8)({version:"asf/version",updateChannel:"asf/updateChannel",updatesEnabled:"asf/updatesEnabled",canUpdate:"asf/canUpdate"}),statusText(){return this.error?this.error:this.loading||this.releases.length?void 0:this.$t("releases-not-found")}},async created(){try{this.releases=await this.loadReleases(),this.loading=!1}catch(e){this.error=e.message}},methods:{getTimeText(e){const s=(0,d.A)(),t=new Date-new Date(e),a=l()(t,{language:s,largest:2,maxDecimalPoints:0,conjunction:this.$t("released-ago-conjunction")});return this.$t("released-ago",{time:a})},isLatestForUpdateChannel(e){return this.updateChannel===u.UPDATECHANNEL.EXPERIMENTAL&&0===e||this.updateChannel===u.UPDATECHANNEL.STABLE&&1===e},isNewer(e){return e>this.version},async update(){if(!this.updating){this.updating=!0,this.$snotify.info(this.$t("update-trying"),this.$t("info")).on("click",(e=>this.$router.push({name:"log"})));try{await this.$http.post("asf/update",{}),this.$router.push({name:"setup",params:{update:!0}})}catch(e){if(!e.result&&!e.message.includes("â‰¥"))throw e;const{remoteVersion:s,localVersion:t}=this.extractVersions(e);t===s?this.$info(this.$t("update-is-up-to-date")):this.$info(this.$t("update-is-newest"))}finally{this.updating=!1}}},async loadReleases(){const e=g.Jt("cache:releases");if(e){const{timestamp:s,releases:t,version:a}=e,n=Date.now()-36e5;let r=!0;if(t.forEach((e=>{const s=e.changelog;s&&s.startsWith("<p>Changes since")||(r=!1),e.changelog=s.replace(/<li>:\w+:/g,(e=>`<li>${h().parse(e.substring(4),this.emojiSettings)}`))})),a===this.version&&s>n&&r)return t}const s=await this.fetchReleases();return s.forEach((e=>{e.changelog=e.changelog.replace(/<li>:\w+:/g,(e=>`<li>${h().parse(e.substring(4),this.emojiSettings)}`))})),g.hZ("cache:releases",{timestamp:Date.now(),releases:s,version:this.version}),s},async fetchReleases(){const e=[];return e.push(await this.fetchRelease()),e[0]&&e[0].stable||e.push(await this.fetchRelease("latest")),!e.some((e=>e.version===this.version))&&this.version<=e[0].version&&e.push(await this.fetchRelease(this.version)),e.filter(((s,t)=>!!s&&e.findIndex((e=>e.version===s.version))===t)).sort(((e,s)=>function(e,s){const t=e.split(".").map((e=>parseInt(e,10))),a=s.split(".").map((e=>parseInt(e,10))),n=Math.max(t.length,a.length);for(let e=0;e<n;++e){const s=t[e]||0,n=a[e]||0;if(s!==n)return s>n?1:-1}return 0}(s.version,e.version)))},async fetchRelease(e=""){try{const s=await this.$http.get(`www/github/release/${e}`),t=new Date(s.ReleasedAt),a={ignoreTags:["code"]};let n=(0,o.A)(s.ChangelogHTML,a).replace(/<a href="/g,'<a target="_blank" rel="noreferrer noopener" href="');return n||(n=this.$t("releases-changelog")),{changelog:n,stable:s.Stable,version:s.Version,publishedAt:t}}catch(e){console.warn(e.message)}}}};t(9798);var _=t(4486);const m={name:"Releases",metaInfo(){return{title:this.$t("releases")}},components:{AsfReleases:(0,_.A)(p,n,[],!1,null,null,null).exports}},f=(0,_.A)(m,a,[],!1,null,null,null).exports},9798:(e,s,t)=>{var a=t(716);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,t(534).A)("3dd764ec",a,!1,{})}}]);