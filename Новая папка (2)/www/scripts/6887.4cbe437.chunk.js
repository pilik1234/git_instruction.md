(self.webpackChunkasf_ui=self.webpackChunkasf_ui||[]).push([[6887],{7965:(t,e,a)=>{"use strict";var n=a(6426),s={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var a,o,i,r,l,c,p=!1;e||(e={}),a=e.debug||!1;try{if(i=n(),r=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=t,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),e.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=s[e.format]||s.default;window.clipboardData.setData(o,t)}else n.clipboardData.clearData(),n.clipboardData.setData(e.format,t);e.onCopy&&(n.preventDefault(),e.onCopy(n.clipboardData))})),document.body.appendChild(c),r.selectNodeContents(c),l.addRange(r),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");p=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),p=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),o=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,t)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(r):l.removeAllRanges()),c&&document.body.removeChild(c),i()}return p}},2477:(t,e,a)=>{var n=a(1601),s=a(6314)(n);s.push([t.id,".asf-bans{display:grid;grid-gap:1em;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));min-height:0}@media screen and (max-width: 1366px){.asf-bans{grid-template-columns:repeat(auto-fill, minmax(150px, 1fr))}}@media screen and (max-width: 400px){.asf-bans{grid-template-columns:1fr}}.asf-bans .ban{background:var(--color-background-modal);border-radius:4px;display:flex;justify-content:center;align-items:center;padding:.5em}.asf-bans .ban__ip{margin:0;font-size:larger}.asf-bans .ban__buttons{display:flex}.asf-bans .ban__button{color:var(--color-text-disabled);cursor:pointer;display:block;padding:.5em;transition:color .3s}",""]),t.exports=s},6426:t=>{t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,a=[],n=0;n<t.rangeCount;n++)a.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||a.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},6887:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var n=function(){var t=this,e=t._self._c;return e("main",{staticClass:"main-container main-container--fullheight"},[e("div",{staticClass:"container"},[e("div",{staticClass:"form-item"},[e("div",{staticClass:"form-item__buttons"},[e("button",{staticClass:"button button--small",attrs:{disabled:t.loading},on:{click:function(e){return t.refresh()}}},[t.loading?e("FontAwesomeIcon",{attrs:{icon:"spinner",spin:""}}):e("span",[t._v(t._s(t.$t("asf-bans-refresh")))])],1),t._v(" "),t.bannedIps.length?e("button",{staticClass:"button button--small pull-right",on:{click:function(e){return t.removeBan()}}},[t.removingAll?e("FontAwesomeIcon",{attrs:{icon:"spinner",spin:""}}):e("span",[t._v(t._s(t.$t("asf-bans-remove-all")))])],1):t._e()])]),t._v(" "),t.loading?e("h3",{staticClass:"subtitle"},[e("FontAwesomeIcon",{attrs:{icon:"spinner",size:"lg",spin:""}})],1):t.bannedIps.length?e("div",{staticClass:"asf-bans"},t._l(t.bannedIps,(function(a){return e("div",{key:a,staticClass:"ban"},[e("p",{staticClass:"ban__ip"},[t._v(t._s(a))]),t._v(" "),e("div",{staticClass:"ban__buttons pull-right"},[e("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("asf-bans-copy"),expression:"$t('asf-bans-copy')"}],staticClass:"ban__button",on:{click:function(e){return t.copyIp(a)}}},[e("FontAwesomeIcon",{attrs:{icon:"clipboard"}})],1),t._v(" "),e("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("asf-bans-remove"),expression:"$t('asf-bans-remove')"}],staticClass:"ban__button",on:{click:function(e){return t.removeBan(a)}}},[t.removing===a?e("FontAwesomeIcon",{attrs:{icon:"spinner",spin:""}}):e("FontAwesomeIcon",{attrs:{icon:"trash"}})],1)])])})),0):e("p",{staticClass:"subtitle"},[t._v(t._s(t.$t("asf-bans-empty")))])])])};n._withStripped=!0;var s=a(7965);const o={name:"ASFBans",metaInfo(){return{title:this.$t("asf-bans")}},data:()=>({loading:!1,removing:!1,removingAll:!1,bannedIps:[]}),created(){this.refresh()},methods:{copyIp(t){s(t),this.$info(this.$t("asf-bans-copied"))},async removeBan(t=null){if(!this.removing&&!this.removingAll){t?this.removing=t:this.removingAll=!0;try{const e=t?`ipc/bans/${t}`:"ipc/bans";await this.$http.del(e),t?this.$success(this.$t("asf-bans-deleted",{ip:t})):this.$success(this.$t("asf-bans-deleted-all")),this.refresh()}catch(t){this.$error(t.message)}finally{this.removing=!1,this.removingAll=!1}}},async refresh(){if(!this.loading){this.loading=!0;try{this.bannedIps=await this.$http.get("ipc/bans")}catch(t){this.$error(t.message)}finally{this.loading=!1}}}}};a(1816);const i=(0,a(4486).A)(o,n,[],!1,null,null,null).exports},1816:(t,e,a)=>{var n=a(2477);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,a(534).A)("7c75afa0",n,!1,{})}}]);